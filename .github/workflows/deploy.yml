name: Installer Ansible sur Ubuntu

on:
  push:
    branches:
      - main

jobs:
  install-ansible:
    runs-on: ubuntu-latest

    steps:
      # Étape 1 : Cloner le repository
      - name: Cloner le repository
        uses: actions/checkout@v3

      # Étape 2 : Mettre à jour les paquets et installer Ansible
      - name: Installer Ansible
        run: |
          sudo apt update
          sudo apt install -y software-properties-common
          sudo add-apt-repository --yes --update ppa:ansible/ansible
          sudo apt install -y ansible

      # Étape 3 : Vérifier l'installation d'Ansible
      - name: Vérification de l'installation
        run: |
          ansible --version
